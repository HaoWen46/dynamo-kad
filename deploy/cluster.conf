# dynamo-kad cluster definition for CSIE workstation pool
# Source this file from dynamoctl.sh and workload.sh.
# Lines starting with # are comments.

# ── Network ──────────────────────────────────────────────
GRPC_PORT=51200
METRICS_PORT=51201

# 10 CSIE workstations (140.112.30.182 – 191)
# IMPORTANT: only 140.112.30.x works for TCP. Do NOT use 10.217.44.x.
NODES=(
  140.112.30.182
  140.112.30.183
  140.112.30.184
  140.112.30.185
  140.112.30.186
  140.112.30.187
  140.112.30.188
  140.112.30.189
  140.112.30.190
  140.112.30.191
)

# Seed nodes: indices into NODES array (0-based).
# First 3 nodes bootstrap the DHT ring.
SEED_INDICES=(0 1 2)

# ── Remote paths (per-node, local disk) ──────────────────
REMOTE_BASE="/tmp2/b11902156/dynamo-kad"
REMOTE_BIN="${REMOTE_BASE}/bin"
REMOTE_CONFIG="${REMOTE_BASE}/config"
REMOTE_DATA="${REMOTE_BASE}/data"
REMOTE_LOG="${REMOTE_BASE}/logs"

# ── SSH ──────────────────────────────────────────────────
SSH_USER="b11902156"
SSH_OPTS="-o StrictHostKeyChecking=no -o ConnectTimeout=5 -o BatchMode=yes"

# ── Project path on NFS home (shared across all nodes) ──
# Set this to the absolute path of the dynamo-kad repo on the remote
# machines.  Used by build-remote to compile on a CSIE node.
# Leave empty to auto-detect from the local PROJECT_ROOT.
# Note: use a literal path, not $HOME (which would expand to local home).
REMOTE_PROJECT="/home/student/11/b11902156/dynamo-kad"

# ── Kademlia defaults ───────────────────────────────────
KAD_K=20
KAD_ALPHA=3
KAD_RPC_TIMEOUT_MS=5000
KAD_REFRESH_INTERVAL_SECS=3600
KAD_MAX_RECORDS=10000

# ── Dynamo KV defaults ──────────────────────────────────
KV_N=3
KV_R=2
KV_W=2
KV_READ_REPAIR=true
KV_HINTED_HANDOFF=true
KV_HINT_DELIVERY_INTERVAL_SECS=30
KV_MAX_HINTS_PER_CYCLE=100

# ── Storage ─────────────────────────────────────────────
STORAGE_FSYNC=batch

# ── Runtime ─────────────────────────────────────────────
RUST_LOG_LEVEL=info
